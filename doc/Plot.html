<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>Class: Plot</title>

<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script type="text/javascript" charset="utf-8" src="./js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="./index.html">Home</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>Plot.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link">Object
  
</nav>

    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-new">::new</a>
    
    <li><a href="#method-i-findOutliers">#findOutliers</a>
    
    <li><a href="#method-i-generatePlot">#generatePlot</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    
    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./Enumerable.html">Enumerable</a>
  
    <li><a href="./LibertyDatabase.html">LibertyDatabase</a>
  
    <li><a href="./Plot.html">Plot</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class Plot</h1>

  <div id="description" class="description">
    
<p><a href="Plot.html">Plot</a> is a class to generate various plots from
given data.</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <!-- Attributes -->
    <section id="attribute-method-details" class="method-section section">
      <h3 class="section-header">Attributes</h3>

      
      <div id="attribute-i-outlier_data" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">outlier_data</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-x_data" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">x_data</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-y_data" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">y_data</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
    </section><!-- attribute-method-details -->
    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">( x, y=nil )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Constructor</p>

<h4 id="method-c-new-label-Parameters">Parameters</h4>
<dl class="rdoc-list label-list"><dt><code>x</code>
<dd>
<p>The data to be used on the x-axis. Passed as hash.</p>
</dd><dt><code>y</code>
<dd>
<p>The data to be used on the y-axis. Passed as hash. Nil if no hash is
passed.</p>
</dd></dl>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File Plot.rb, line 24</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>( <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>=<span class="ruby-keyword">nil</span> )
    <span class="ruby-ivar">@x_data</span> = <span class="ruby-identifier">x</span>.<span class="ruby-identifier">clone</span>
    <span class="ruby-ivar">@y_data</span> = <span class="ruby-identifier">y</span>.<span class="ruby-identifier">clone</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">y</span>
    <span class="ruby-ivar">@plottype</span> = <span class="ruby-value">:scatter</span> <span class="ruby-comment"># Default to 2D plotting</span>
    <span class="ruby-ivar">@outlier_data</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>

    <span class="ruby-comment"># Check for 1D vs 2D plotting</span>
    <span class="ruby-keyword">if</span> (<span class="ruby-identifier">y</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span>)
        <span class="ruby-ivar">@plottype</span> = <span class="ruby-value">:histogram</span>
    <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-findOutliers" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">findOutliers</span><span
            class="method-args">( filename = "outliers", k = 1 )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Find outliers for a given set of data and print them to a file. Outliers
are defined as any numbers that lie outside median +- k(q3-q1).</p>

<h4 id="method-i-findOutliers-label-Parameters">Parameters</h4>
<dl class="rdoc-list label-list"><dt><code>filename</code>
<dd>
<p>A string representing the name of the file to be generated. Default is
“outliers”. Name of actual file will be outliers.outlier</p>
</dd><dt><code>k</code>
<dd>
<p>Number of interquartile ranges to check outliers against. Default is 1.</p>
</dd></dl>
          

          
          <div class="method-source-code" id="findOutliers-source">
            <pre><span class="ruby-comment"># File Plot.rb, line 44</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">findOutliers</span>( <span class="ruby-identifier">filename</span> = <span class="ruby-string">&quot;outliers&quot;</span>, <span class="ruby-identifier">k</span> = <span class="ruby-value">1</span> )
    <span class="ruby-keyword">if</span> ( <span class="ruby-ivar">@y_data</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span> ) <span class="ruby-comment"># 2D Plotting</span>
        <span class="ruby-comment"># We can only compare one set of data at a time, so we need to merge the x and y data. This is done by dividing y values by</span>
        <span class="ruby-comment"># the corresponding x value and creating a new hash of slopes.</span>
        <span class="ruby-identifier">slopeHash</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>
        <span class="ruby-identifier">slopeArray</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span> <span class="ruby-comment"># For use with the fiveNumSum method.</span>

        <span class="ruby-ivar">@x_data</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
            <span class="ruby-identifier">slopeHash</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-ivar">@y_data</span>[<span class="ruby-identifier">key</span>].<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> <span class="ruby-ivar">@x_data</span>[<span class="ruby-identifier">key</span>].<span class="ruby-identifier">to_f</span>
            <span class="ruby-identifier">slopeArray</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@y_data</span>[<span class="ruby-identifier">key</span>].<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> <span class="ruby-ivar">@x_data</span>[<span class="ruby-identifier">key</span>].<span class="ruby-identifier">to_f</span>)
        }

        <span class="ruby-comment"># Perform a 5 Number Analysis on the array</span>

        <span class="ruby-identifier">summary</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
        <span class="ruby-identifier">summary</span> = <span class="ruby-identifier">slopeArray</span>.<span class="ruby-identifier">fiveNumSum</span>

        <span class="ruby-comment"># Determine the maximum and minimum non-outlier slopes</span>
        <span class="ruby-identifier">minSlope</span> = <span class="ruby-identifier">summary</span>[<span class="ruby-value">2</span>] <span class="ruby-operator">-</span> <span class="ruby-identifier">k</span> * (<span class="ruby-identifier">summary</span>[<span class="ruby-value">3</span>] <span class="ruby-operator">-</span> <span class="ruby-identifier">summary</span>[<span class="ruby-value">1</span>])
        <span class="ruby-identifier">maxSlope</span> = <span class="ruby-identifier">summary</span>[<span class="ruby-value">2</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">k</span> * (<span class="ruby-identifier">summary</span>[<span class="ruby-value">3</span>] <span class="ruby-operator">-</span> <span class="ruby-identifier">summary</span>[<span class="ruby-value">1</span>])

        <span class="ruby-comment"># Select any outliers and print their cell names to a datafile</span>

        <span class="ruby-identifier">newfile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">filename</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;.outlier&quot;</span>, <span class="ruby-string">&quot;w&quot;</span>)
        <span class="ruby-identifier">newfile</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Outlier slope bounds are &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">minSlope</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">maxSlope</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;.&quot;</span>
        <span class="ruby-identifier">newfile</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;k = #{k}&quot;</span>
        <span class="ruby-identifier">slopeHash</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
                <span class="ruby-keyword">if</span> (<span class="ruby-identifier">slopeHash</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">maxSlope</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">slopeHash</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">minSlope</span>)
                    <span class="ruby-identifier">newfile</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;#{key}&quot;</span>
                    <span class="ruby-ivar">@outlier_data</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-value">0</span> <span class="ruby-comment"># Generate a hash with keys corresponding to outlier names. Data associated to keys is just filler.</span>
                <span class="ruby-keyword">end</span>
        }
        <span class="ruby-identifier">newfile</span>.<span class="ruby-identifier">close</span>
        <span class="ruby-identifier">puts</span> <span class="ruby-ivar">@outlier_data</span>.<span class="ruby-identifier">keys</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$verbose</span>
    <span class="ruby-keyword">end</span> <span class="ruby-comment"># 2D plotting outliers</span>

    <span class="ruby-keyword">if</span> ( <span class="ruby-ivar">@y_data</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span>) <span class="ruby-comment"># For 1D Plotting</span>
        <span class="ruby-identifier">x_array</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span> <span class="ruby-comment"># For use with fiveNumSum</span>
        <span class="ruby-ivar">@x_data</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
            <span class="ruby-identifier">x_array</span>.<span class="ruby-identifier">push</span>( <span class="ruby-ivar">@x_data</span>[<span class="ruby-identifier">key</span>])
        }

        <span class="ruby-comment"># 5 Number Analysis on Data</span>
        <span class="ruby-identifier">summary</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
        <span class="ruby-identifier">summary</span> = <span class="ruby-identifier">x_array</span>.<span class="ruby-identifier">fiveNumSum</span>

        <span class="ruby-comment"># Determine the max and min non-outliers</span>
        <span class="ruby-identifier">minOut</span> = <span class="ruby-identifier">summary</span>[<span class="ruby-value">2</span>] <span class="ruby-operator">-</span> <span class="ruby-identifier">k</span> * (<span class="ruby-identifier">summary</span>[<span class="ruby-value">3</span>] <span class="ruby-operator">-</span> <span class="ruby-identifier">summary</span>[<span class="ruby-value">1</span>])
        <span class="ruby-identifier">maxOut</span> = <span class="ruby-identifier">summary</span>[<span class="ruby-value">2</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">k</span> * (<span class="ruby-identifier">summary</span>[<span class="ruby-value">3</span>] <span class="ruby-operator">-</span> <span class="ruby-identifier">summary</span>[<span class="ruby-value">1</span>])

        <span class="ruby-comment"># Select any outliers and print their cell names to a datafile</span>

        <span class="ruby-identifier">newfile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">filename</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;outlier&quot;</span>, <span class="ruby-string">&quot;w&quot;</span>)
        <span class="ruby-identifier">newfile</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Outlier bounds are &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">minOut</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot; and &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">maxOut</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;.&quot;</span>
        <span class="ruby-identifier">newfile</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;k = #{k}&quot;</span>
        <span class="ruby-ivar">@x_data</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
            <span class="ruby-keyword">if</span> (<span class="ruby-ivar">@x_data</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">maxOut</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@x_data</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">minOut</span>)
                <span class="ruby-identifier">newfile</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;#{key}&quot;</span>
                <span class="ruby-ivar">@outlier_data</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-value">0</span> <span class="ruby-comment"># Generate a hash with keys corresponding to outlier names. Associated data is filler.</span>
            <span class="ruby-keyword">end</span>
        }
        <span class="ruby-identifier">newfile</span>.<span class="ruby-identifier">close</span>
        <span class="ruby-identifier">puts</span> <span class="ruby-ivar">@outlier_data</span>.<span class="ruby-identifier">keys</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$verbose</span>
    <span class="ruby-keyword">end</span> <span class="ruby-comment"># 1D Plotting</span>

<span class="ruby-keyword">end</span></pre>
          </div><!-- findOutliers-source -->
          
        </div>

        

        
      </div><!-- findOutliers-method -->

    
      <div id="method-i-generatePlot" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">generatePlot</span><span
            class="method-args">( options={} )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Generate plots. Data files are generated for both histograms and scatter
plots. The histogram data file lists which keys are included in each bin.
The scatter plot data file displays the data associated with each key.</p>

<h4 id="method-i-generatePlot-label-Options">Options</h4>
<dl class="rdoc-list label-list"><dt><code>:filename</code>
<dd>
<p>A string representing the filename for data and plot files. Default is
“data”.</p>
</dd><dt><code>:numBins</code>
<dd>
<p>The number of bins to sort histogram data into. Default is 2.</p>
</dd><dt><code>:x_label</code>
<dd>
<p>A string label for the x axis. Default is “X”.</p>
</dd><dt><code>:y_label</code>
<dd>
<p>A string label for the y axis. Default is “Y”.</p>
</dd><dt><code>:title</code>
<dd>
<p>A string title for the plot. Default is “Title”.</p>
</dd><dt><code>:min</code>
<dd>
<p>Sets the minimum range value for histograms. Default is the smallest value
in the hash passed in.</p>
</dd><dt><code>:max</code>
<dd>
<p>Sets the maximum range value for histograms. Default is the largest value
in the hash passed in.</p>
</dd><dt><code>:logx</code>
<dd>
<p>Bool to apply a log scale to the x axis of a scatter plot. Default is false
(off).</p>
</dd><dt><code>:logy</code>
<dd>
<p>Bool to apply a log scale to the y axis of a scatter plot. Default is false
(off).</p>
</dd><dt><code>:linreg</code>
<dd>
<p>Bool to add a linear regression line to a scatter plot. Default is false
(off).</p>
</dd><dt><code>:doOutliers</code>
<dd>
<p>Bool to enable calculation of outliers.  Default is false (off).</p>
</dd><dt><code>:outlierK</code>
<dd>
<p>Outlier calculation K value.  Default is 2.</p>
</dd><dt><code>:dataLabels</code>
<dd>
<p>Bool to include the key of the @<a
href="Plot.html#attribute-i-x_data">#x_data</a> hash at the appropriate
point of the plot. Default is false (off).</p>
</dd><dt><code>:addOutlierLabels</code>
<dd>
<p>Int to enable outlier labeling. Value represents the number of IQRs to
consider when generating the list. Default is 0 (off). Must be &gt; 0 to
enable.</p>
</dd><dt><code>:savePlot</code>
<dd>
<p>Bool to select plotting to screen or plotting to file. Default is false (<a
href="Plot.html">Plot</a> to screen)</p>
</dd></dl>
          

          
          <div class="method-source-code" id="generatePlot-source">
            <pre><span class="ruby-comment"># File Plot.rb, line 132</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">generatePlot</span>( <span class="ruby-identifier">options</span>={} )
    <span class="ruby-comment"># Generate an array of the x hash values to easily find the minimum and maximum.</span>
    <span class="ruby-identifier">x</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-ivar">@x_data</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">x</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@x_data</span>[<span class="ruby-identifier">key</span>].<span class="ruby-identifier">to_f</span>)
    }

    <span class="ruby-identifier">defaults</span> = { <span class="ruby-value">:filename</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;data&quot;</span>,
                 <span class="ruby-value">:numBins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>,
                 <span class="ruby-value">:x_label</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;X&quot;</span>,
                 <span class="ruby-value">:y_label</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Y&quot;</span>,
                 <span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Title&quot;</span>,
                 <span class="ruby-value">:min</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">min</span>,
                 <span class="ruby-value">:max</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">max</span>,
                 <span class="ruby-value">:logx</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>,
                 <span class="ruby-value">:logy</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>,
                 <span class="ruby-value">:linreg</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>,
                 <span class="ruby-value">:dataLabels</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>,
                 <span class="ruby-value">:doOutliers</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>,
                 <span class="ruby-value">:outlierK</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>,
                 <span class="ruby-value">:addOutlierLabels</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>,
                 <span class="ruby-value">:savePlot</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span> }

    <span class="ruby-identifier">options</span> = <span class="ruby-identifier">defaults</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">options</span>)

    <span class="ruby-identifier">savePlot</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:savePlot</span>]
    <span class="ruby-identifier">filename</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:filename</span>]
    <span class="ruby-identifier">numBins</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:numBins</span>]
    <span class="ruby-identifier">x_label</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:x_label</span>]
    <span class="ruby-identifier">y_label</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:y_label</span>]
    <span class="ruby-identifier">title</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:title</span>]
    <span class="ruby-identifier">min</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:min</span>]
    <span class="ruby-identifier">max</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:max</span>]
    <span class="ruby-identifier">logx</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:logx</span>]
    <span class="ruby-identifier">logy</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:logy</span>]
    <span class="ruby-identifier">linreg</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:linreg</span>]
    <span class="ruby-identifier">outlierAnalysis</span> = <span class="ruby-constant">Array</span>.[](<span class="ruby-identifier">options</span>[<span class="ruby-value">:doOutliers</span>],<span class="ruby-identifier">options</span>[<span class="ruby-value">:outlierK</span>])
    <span class="ruby-identifier">dataLabels</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:dataLabels</span>]
    <span class="ruby-identifier">addOutlierLabels</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:addOutlierLabels</span>]

    <span class="ruby-keyword">if</span> (<span class="ruby-ivar">@plottype</span> <span class="ruby-operator">==</span> <span class="ruby-value">:histogram</span>)

        <span class="ruby-identifier">bw</span> = (<span class="ruby-identifier">max</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">min</span>.<span class="ruby-identifier">to_f</span>) <span class="ruby-operator">/</span> <span class="ruby-identifier">numBins</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-comment"># Calculate bin width</span>
        <span class="ruby-identifier">x_count</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
        <span class="ruby-identifier">x_axis</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>

        <span class="ruby-identifier">histfile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">filename</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;.histo&quot;</span>, <span class="ruby-string">&quot;w&quot;</span>) <span class="ruby-comment"># File that shows the keys that belong in each bin.</span>

        <span class="ruby-comment"># checks which values belong in each bin. Edgecases go to the lower bin.</span>
        (<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">numBins</span>).<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span>
            <span class="ruby-identifier">count</span> = <span class="ruby-value">0</span>
            <span class="ruby-identifier">histfile</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Values from #{(min.to_f + (n.to_f-1) * bw.to_f)} to #{min.to_f + n.to_f * bw.to_f}.&quot;</span> <span class="ruby-comment"># Label the bin in the file.</span>

            <span class="ruby-keyword">if</span> (<span class="ruby-identifier">min</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">min</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">n</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>) <span class="ruby-comment"># To fix the issue with keys being left out if the bin minimum == data minimum(s)</span>
                <span class="ruby-ivar">@x_data</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
                    <span class="ruby-keyword">if</span> (<span class="ruby-ivar">@x_data</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">min</span>)
                        <span class="ruby-identifier">histfile</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">key</span> <span class="ruby-comment"># Place a copy of the minimum(s) in the first bin</span>
                        <span class="ruby-identifier">count</span> = <span class="ruby-identifier">count</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span> <span class="ruby-comment"># Increment the first bin to reflect this</span>
                    <span class="ruby-keyword">end</span>
                }
            <span class="ruby-keyword">end</span>

            <span class="ruby-ivar">@x_data</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
                <span class="ruby-keyword">if</span>(((<span class="ruby-identifier">min</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">n</span>.<span class="ruby-identifier">to_f</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>) * <span class="ruby-identifier">bw</span>.<span class="ruby-identifier">to_f</span>) <span class="ruby-operator">&lt;</span> (<span class="ruby-ivar">@x_data</span>[<span class="ruby-identifier">v</span>].<span class="ruby-identifier">to_f</span>)) <span class="ruby-keyword">and</span> ((<span class="ruby-ivar">@x_data</span>[<span class="ruby-identifier">v</span>].<span class="ruby-identifier">to_f</span>) <span class="ruby-operator">&lt;=</span> (<span class="ruby-identifier">min</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">to_f</span> * <span class="ruby-identifier">bw</span>.<span class="ruby-identifier">to_f</span>)))
                    <span class="ruby-identifier">count</span> = <span class="ruby-identifier">count</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span> <span class="ruby-comment"># Add increment the bin counter if the key qualifies</span>
                    <span class="ruby-identifier">histfile</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">v</span> <span class="ruby-comment"># List the key in the bin if it qualifies</span>
                <span class="ruby-keyword">end</span>
            }

            <span class="ruby-identifier">x_count</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">count</span>) <span class="ruby-comment"># Add the bin count to the count array.</span>
        }

        <span class="ruby-identifier">histfile</span>.<span class="ruby-identifier">close</span>

        <span class="ruby-comment"># To check bin counts</span>
        <span class="ruby-identifier">binSum</span> = <span class="ruby-value">0</span>;
        (<span class="ruby-value">0</span><span class="ruby-operator">..</span>(<span class="ruby-identifier">numBins</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>)).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
            <span class="ruby-identifier">binSum</span> = <span class="ruby-identifier">x_count</span>[<span class="ruby-identifier">index</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">binSum</span>
            <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Bin #{index} contains #{x_count[index]}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$verbose</span>
            }
        <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;There were #{binSum} samples in the plot.&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$verbose</span>

        <span class="ruby-comment"># generates the x axis</span>
        (<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">numBins</span>).<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span>
            <span class="ruby-identifier">x_axis</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">min</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">+</span> (<span class="ruby-value">0.5</span>*<span class="ruby-identifier">bw</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">bw</span>.<span class="ruby-identifier">to_f</span> * (<span class="ruby-identifier">n</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>)))
        }

        <span class="ruby-constant">Gnuplot</span>.<span class="ruby-identifier">open</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gp</span><span class="ruby-operator">|</span>
            <span class="ruby-constant">Gnuplot</span><span class="ruby-operator">::</span><span class="ruby-constant">Plot</span>.<span class="ruby-identifier">new</span>( <span class="ruby-identifier">gp</span> ) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">plot</span><span class="ruby-operator">|</span>
                <span class="ruby-identifier">plot</span>.<span class="ruby-identifier">title</span>   <span class="ruby-identifier">title</span>
                <span class="ruby-identifier">plot</span>.<span class="ruby-identifier">ylabel</span>  <span class="ruby-string">&quot;Frequency&quot;</span>
                <span class="ruby-identifier">plot</span>.<span class="ruby-identifier">xlabel</span>  <span class="ruby-identifier">x_label</span>

                <span class="ruby-comment"># Save the plot to a file</span>
                <span class="ruby-keyword">if</span> (<span class="ruby-identifier">savePlot</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>)
                    <span class="ruby-identifier">plot</span>.<span class="ruby-identifier">terminal</span> <span class="ruby-string">&quot;gif&quot;</span>
                    <span class="ruby-identifier">plot</span>.<span class="ruby-identifier">output</span> <span class="ruby-identifier">filename</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;.gif&quot;</span>
                <span class="ruby-keyword">end</span>

                <span class="ruby-identifier">plot</span>.<span class="ruby-identifier">arbitrary_lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;set xrange [&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">min</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;:&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">max</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;]&quot;</span> <span class="ruby-comment"># Set x axis according to max and mins</span>
                <span class="ruby-identifier">plot</span>.<span class="ruby-identifier">arbitrary_lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;set yrange [0:#{x_count.max.to_f + x_count.max.to_f * 0.1}]&quot;</span> <span class="ruby-comment"># Make the y axis 110% of the highest count</span>

                <span class="ruby-identifier">plot</span>.<span class="ruby-identifier">data</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Gnuplot</span><span class="ruby-operator">::</span><span class="ruby-constant">DataSet</span>.<span class="ruby-identifier">new</span>( [<span class="ruby-identifier">x_axis</span>, <span class="ruby-identifier">x_count</span>] ) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ds</span><span class="ruby-operator">|</span>
                    <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">with</span> = <span class="ruby-string">&quot;boxes&quot;</span>
                    <span class="ruby-identifier">ds</span>.<span class="ruby-identifier">notitle</span>
                <span class="ruby-keyword">end</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> (<span class="ruby-ivar">@plottype</span> <span class="ruby-operator">==</span> <span class="ruby-value">:scatter</span>)

        <span class="ruby-keyword">if</span>(<span class="ruby-ivar">@x_data</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@y_data</span>.<span class="ruby-identifier">length</span>)

        <span class="ruby-comment"># generate a datafile to use in gnuplot</span>
        <span class="ruby-identifier">datfile</span> = <span class="ruby-identifier">filename</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;.scatter&quot;</span>

        <span class="ruby-identifier">newfile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">datfile</span>, <span class="ruby-string">&quot;w&quot;</span>)

        <span class="ruby-comment"># pointCount tells how many points are on the graph</span>
        <span class="ruby-identifier">pointCount</span> = <span class="ruby-value">0</span>
        <span class="ruby-ivar">@x_data</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
            <span class="ruby-identifier">newfile</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;#{@x_data[i]}\t#{@y_data[i]}&quot;</span>
            <span class="ruby-identifier">pointCount</span> = <span class="ruby-identifier">pointCount</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
        }

        <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;There are #{pointCount} points on the plot.&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$verbose</span>

        <span class="ruby-identifier">newfile</span>.<span class="ruby-identifier">close</span>

        <span class="ruby-comment"># plot data</span>
        <span class="ruby-constant">Gnuplot</span>.<span class="ruby-identifier">open</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gp</span><span class="ruby-operator">|</span>
            <span class="ruby-constant">Gnuplot</span><span class="ruby-operator">::</span><span class="ruby-constant">Plot</span>.<span class="ruby-identifier">new</span>( <span class="ruby-identifier">gp</span> ) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">plot</span><span class="ruby-operator">|</span>

                <span class="ruby-comment"># plot to a file</span>
                <span class="ruby-keyword">if</span> (<span class="ruby-identifier">savePlot</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>)
                    <span class="ruby-identifier">plot</span>.<span class="ruby-identifier">terminal</span> <span class="ruby-string">&quot;gif&quot;</span>
                    <span class="ruby-identifier">plot</span>.<span class="ruby-identifier">output</span> <span class="ruby-identifier">filename</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;.gif&quot;</span>
                <span class="ruby-keyword">end</span>

                <span class="ruby-comment">#apply title/labels</span>
                <span class="ruby-identifier">plot</span>.<span class="ruby-identifier">title</span>   <span class="ruby-identifier">title</span>
                <span class="ruby-identifier">plot</span>.<span class="ruby-identifier">ylabel</span>  <span class="ruby-identifier">y_label</span>
                <span class="ruby-identifier">plot</span>.<span class="ruby-identifier">xlabel</span>  <span class="ruby-identifier">x_label</span>

                <span class="ruby-comment"># check if graphs need to be logscaled</span>
                <span class="ruby-keyword">if</span> (<span class="ruby-identifier">logx</span>)
                    <span class="ruby-identifier">plot</span>.<span class="ruby-identifier">arbitrary_lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;set logscale x&quot;</span>
                <span class="ruby-keyword">end</span>

                <span class="ruby-keyword">if</span> (<span class="ruby-identifier">logy</span>)
                    <span class="ruby-identifier">plot</span>.<span class="ruby-identifier">arbitrary_lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;set logscale y&quot;</span>
                <span class="ruby-keyword">end</span>

                <span class="ruby-comment"># check if a linear regression is desired</span>
                <span class="ruby-keyword">if</span> (<span class="ruby-identifier">linreg</span>)
                    <span class="ruby-identifier">plot</span>.<span class="ruby-identifier">arbitrary_lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;f(x) = m*x + b&quot;</span>
                    <span class="ruby-identifier">plot</span>.<span class="ruby-identifier">arbitrary_lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;fit f(x) '&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">datfile</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;' using 1:2 via m,b&quot;</span>
                <span class="ruby-keyword">end</span>

                <span class="ruby-comment"># perform outlier analysis</span>
                <span class="ruby-keyword">if</span> (<span class="ruby-identifier">outlierAnalysis</span>[<span class="ruby-value">0</span>])

                    <span class="ruby-comment"># generate array of slopes of data</span>
                    <span class="ruby-identifier">yDivX</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
                    <span class="ruby-ivar">@x_data</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
                        <span class="ruby-identifier">yDivX</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@y_data</span>[<span class="ruby-identifier">key</span>].<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> <span class="ruby-ivar">@x_data</span>[<span class="ruby-identifier">key</span>].<span class="ruby-identifier">to_f</span>)
                    }

                    <span class="ruby-comment"># apply the 5 number summary function</span>
                    <span class="ruby-identifier">summData</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
                    <span class="ruby-identifier">summData</span> = <span class="ruby-identifier">yDivX</span>.<span class="ruby-identifier">fiveNumSum</span> <span class="ruby-comment"># match to new function</span>

                    <span class="ruby-comment"># Calculate slopes of minimum and maximum lines to show outliers</span>
                    <span class="ruby-identifier">maxline</span> = <span class="ruby-identifier">summData</span>[<span class="ruby-value">2</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">outlierAnalysis</span>[<span class="ruby-value">1</span>] * (<span class="ruby-identifier">summData</span>[<span class="ruby-value">3</span>] <span class="ruby-operator">-</span> <span class="ruby-identifier">summData</span>[<span class="ruby-value">1</span>])
                    <span class="ruby-identifier">minline</span> = <span class="ruby-identifier">summData</span>[<span class="ruby-value">2</span>] <span class="ruby-operator">-</span> <span class="ruby-identifier">outlierAnalysis</span>[<span class="ruby-value">1</span>] * (<span class="ruby-identifier">summData</span>[<span class="ruby-value">3</span>] <span class="ruby-operator">-</span> <span class="ruby-identifier">summData</span>[<span class="ruby-value">1</span>])

                    <span class="ruby-comment"># Define the minline and maxline in gnuplot</span>
                    <span class="ruby-identifier">plot</span>.<span class="ruby-identifier">arbitrary_lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;a(x) = #{minline}*x&quot;</span>
                    <span class="ruby-identifier">plot</span>.<span class="ruby-identifier">arbitrary_lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;b(x) = #{maxline}*x&quot;</span>

                <span class="ruby-keyword">end</span> <span class="ruby-comment">#outlier analysis</span>


                <span class="ruby-comment"># Generate a plot string</span>
                <span class="ruby-identifier">plotString</span> = <span class="ruby-node">&quot;plot '#{datfile}' notitle&quot;</span>

                <span class="ruby-comment"># add linear regression</span>
                <span class="ruby-keyword">if</span> (<span class="ruby-identifier">linreg</span>)
                    <span class="ruby-identifier">plotString</span> = <span class="ruby-identifier">plotString</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;, f(x) title 'Linear Fit'&quot;</span>
                <span class="ruby-keyword">end</span>

                <span class="ruby-comment"># plot with outlier analysis</span>
                <span class="ruby-keyword">if</span> (<span class="ruby-identifier">outlierAnalysis</span>[<span class="ruby-value">0</span>])
                    <span class="ruby-identifier">plotString</span> = <span class="ruby-identifier">plotString</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;, a(x) title 'Minimum', b(x) title 'Maximum'&quot;</span>
                <span class="ruby-keyword">end</span>
                <span class="ruby-comment"># add data point names if desired</span>
                <span class="ruby-keyword">if</span> (<span class="ruby-identifier">dataLabels</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">addOutlierLabels</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>) <span class="ruby-comment"># Won't label everything if outlier labeling is enabled</span>
                    <span class="ruby-ivar">@x_data</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
                        <span class="ruby-identifier">plot</span>.<span class="ruby-identifier">arbitrary_lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;set label '#{key}' at #{@x_data[key].to_f}, #{@y_data[key].to_f}&quot;</span>
                    }
                <span class="ruby-keyword">end</span>

                <span class="ruby-comment"># add outlier data labels</span>
                <span class="ruby-keyword">if</span> ( <span class="ruby-identifier">addOutlierLabels</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> )
                    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">findOutliers</span>( <span class="ruby-identifier">filename</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;ForLabels&quot;</span>, <span class="ruby-identifier">addOutlierLabels</span> )
                    <span class="ruby-ivar">@outlier_data</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
                        <span class="ruby-comment"># add labels to each point where an outlier exists</span>
                        <span class="ruby-identifier">plot</span>.<span class="ruby-identifier">arbitrary_lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;set label '#{key}' at #{@x_data[key].to_f}, #{@y_data[key].to_f}&quot;</span>
                    }
                    <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Labeled #{@outlier_data.size} outliers.&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$verbose</span>
                <span class="ruby-keyword">end</span>
                <span class="ruby-identifier">plot</span>.<span class="ruby-identifier">arbitrary_lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">plotString</span>
            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-comment"># Regenerate the data file to add in key names.</span>
        <span class="ruby-identifier">newfile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">datfile</span><span class="ruby-operator">+</span> <span class="ruby-string">&quot;WITHNAMES&quot;</span>, <span class="ruby-string">&quot;w&quot;</span>)
        
        <span class="ruby-identifier">newfile</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;Name\tX\tY&quot;</span>

        <span class="ruby-ivar">@x_data</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
            <span class="ruby-identifier">newfile</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;#{i}\t#{@x_data[i]}\t#{@y_data[i]}&quot;</span>
        }

        <span class="ruby-identifier">newfile</span>.<span class="ruby-identifier">close</span>

    <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;X and Y are different sizes&quot;</span>
    <span class="ruby-keyword">end</span> <span class="ruby-comment"># x y size check</span>
    <span class="ruby-keyword">end</span> <span class="ruby-comment"># scatter</span>

<span class="ruby-keyword">end</span></pre>
          </div><!-- generatePlot-source -->
          
        </div>

        

        
      </div><!-- generatePlot-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.11.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

